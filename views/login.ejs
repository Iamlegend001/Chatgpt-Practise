<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Sign in</title>
    <link rel="stylesheet" href="/styles/variables.css" />
    <link rel="stylesheet" href="/styles/auth-form.css" />
  </head>
  <body>
    <header class="auth-topbar">
      <p class="brand-mini">Chat App</p>
      <button
        id="themeToggle"
        class="theme-toggle"
        type="button"
        aria-label="Toggle theme"
      >
        Toggle theme
      </button>
    </header>
    <main class="auth-container">
      <form
        class="auth-form"
        method="POST"
        action="/auth/login"
        autocomplete="off"
        aria-labelledby="loginTitle"
        id="loginForm"
        role="form"
      >
        <h1 id="loginTitle" class="auth-title">Sign in</h1>
        <p class="lead">Welcome back.</p>

        <% if (typeof error !== 'undefined' && error) { %>
        <div class="error-text" role="alert"><%= error %></div>
        <% } %>

        <label class="field" for="email">
          <span class="label-text">Email</span>
          <div class="input-with-action">
            <input
              id="email"
              name="email"
              type="email"
              required
              inputmode="email"
              autocomplete="email"
              placeholder="you@domain.com"
              aria-describedby="emailHelp"
              value="<%= typeof formData !== 'undefined' && formData.email ? formData.email : '' %>"
            />
          </div>
          <small id="emailHelp" class="helper-text"
            >Enter your account email.</small
          >
        </label>

        <label class="field" for="password">
          <span class="label-text">Password</span>
          <div class="input-with-action">
            <input
              id="password"
              name="password"
              type="password"
              required
              minlength="8"
              autocomplete="current-password"
              placeholder="••••••••"
              aria-describedby="passwordHelp"
            />
          </div>
          <small id="passwordHelp" class="helper-text"
            >Use your account password.</small
          >
        </label>

        <button type="submit">Sign in</button>

        <p class="form-footer">
          Don't have an account? <a href="/auth/register">Create account</a>
        </p>

        <noscript class="helper-text"
          >JavaScript is disabled — server-side validation will apply.</noscript
        >
      </form>
    </main>
    <script src="/scripts/theme-toggle.js" defer></script>
  </body>
</html>
